(self.webpackChunkroblox_ts_com=self.webpackChunkroblox_ts_com||[]).push([[567],{7512:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var r=n(7855),s=n(5861),a=n(7757),o=n.n(a),i=n(4996),u=n(9604),c=n(5350),l=n(6470),p=n.n(l),d=n(3945),f=n.n(d),m=n(9070),h=n.n(m),g=n(7294),v="subNavBar_GSN3",y="playground_yxTQ",x="editorWrapper_v9uv",b="pointer_CUcU",w=n(4877),E=function(){function e(e){this.getValue=e,this.isInitialized=!1}return e.prototype.get=function(){return this.isInitialized||(this.isInitialized=!0,this.value=this.getValue()),this.value},e}(),k=n(5108),_={minimap:{enabled:!1},scrollbar:{useShadows:!1},scrollBeyondLastLine:!1,insertSpaces:!1,tabSize:4},S=Object.assign({},_),N=Object.assign({},_,{readOnly:!0}),C=["Lava","t","Roact"],M=["types","compiler-types"],Z={parser:"typescript",plugins:[h()],semi:!0,trailingComma:"all",singleQuote:!1,printWidth:120,tabWidth:4,useTabs:!0,arrowParens:"avoid"};function j(e,t){return P.apply(this,arguments)}function P(){return(P=(0,s.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t+"/"+n+".tsx").then((function(e){return e.text()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=new E((function(){return new Worker("../rbxts-worker.js")})),T=new Set,D=/["']@rbxts\/([^"']+)["']/g,F=/\/\/\/\s*<reference path=["']([^"']+)["']\s*\/>/g,R=/\/\/\/\s*<reference types=["']@rbxts\/([^"']+)["']\s*\/>/g,U=/(?:import|export)\s+.+\s+from\s+['"]([^'"]+)['"]/g;function K(e,t){for(var n,s=new Array,a=(0,r.Z)(t.matchAll(e));!(n=a()).done;){var o=n.value;s.push(o[1])}return s}var L="https://cdn.jsdelivr.net/npm";function W(e){return I.apply(this,arguments)}function I(){return(I=(0,s.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.split("/"))[1].includes("@")||(n[1]+="@latest"),t=n.join("/"),e.abrupt("return",fetch(L+"/"+t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){return A.apply(this,arguments)}function A(){return(A=(0,s.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O.get().postMessage({type:"writeFile",filePath:"/node_modules/"+t,content:n}),e.next=3,u._m.init();case 3:e.sent.languages.typescript.typescriptDefaults.addExtraLib(n,t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=new Set;function J(e,t,n){return B.apply(this,arguments)}function B(){return(B=(0,s.Z)(o().mark((function e(t,n,s){var a,i,c,l,d,f,m,h,g,v,y,x,b;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===s&&(s=!1),!z.has(n)){e.next=3;break}return e.abrupt("return",Promise.resolve());case 3:return z.add(n),e.next=6,W(n).then((function(e){return 404===e.status?W(n=n.slice(0,-".d.ts".length)+"/index.d.ts"):e})).then((function(e){return e.text()}));case 6:for(a=e.sent,i=new Array,c=(0,r.Z)(K(F,a));!(l=c()).done;)d=l.value,f=p().resolve(p().dirname(n),d).substr(1),i.push(J(t,f));for(m=(0,r.Z)(K(U,a));!(h=m()).done;)((g=h.value).endsWith(".")||g.endsWith(".."))&&(g+="/index"),v=p().resolve(p().dirname(n),g).substr(1)+".d.ts",i.push(J(t,v));for(y=(0,r.Z)(K(R,a));!(x=y()).done;)b=x.value,i.push(Q(b));return e.next=13,V(n,a);case 13:if(!s){e.next=17;break}return e.next=16,u._m.init();case 16:e.sent.languages.typescript.typescriptDefaults.addExtraLib(a,p().join(t,"index.d.ts"));case 17:return e.abrupt("return",Promise.allSettled(i));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return G.apply(this,arguments)}function G(){return(G=(0,s.Z)(o().mark((function e(t){var n,r,s,a,i,u,c,l,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.has(t)){e.next=22;break}return T.add(t),r=(n="@rbxts/"+t)+"/package.json",e.next=6,W(r);case 6:if(200!==(s=e.sent).status){e.next=21;break}return e.next=10,s.json();case 10:return c=e.sent,e.next=13,V(r,JSON.stringify(c));case 13:return k.log(n+"@"+c.version),l=p().resolve("/"+n,null!=(a=c.main)?a:"").substr(1),d=p().resolve("/"+n,null!=(i=null!=(u=c.types)?u:c.typings)?i:"index.d.ts").substr(1),O.get().postMessage({type:"setMapping",typingsPath:"/node_modules/"+d,mainPath:"/node_modules/"+l}),e.next=19,J(n,d,!0);case 19:e.next=22;break;case 21:k.warn("failed to download "+n);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=function(e){return g.createElement("li",null,g.createElement("a",{className:b+" dropdown__link",onClick:e.onClick},e.name))},q=function(){O.get();var e=g.useState(""),t=e[0],n=e[1],r=g.useState(""),a=r[0],l=r[1],p=g.useState(),d=p[0],m=p[1],h=g.useState(!1),E=h[0],k=h[1],_=g.useState(),P=_[0],T=_[1],F=(0,i.Z)("playground-examples/src");function R(e){null==P||P.setValue(e)}function U(e){return L.apply(this,arguments)}function L(){return(L=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j(F,t).then((function(e){R(e),n(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}g.useEffect((function(){P&&(""!==location.hash?(0,w.E)(location.hash).then((function(e){e&&(R(e),n(e))})):P&&""===P.getValue()&&U(C[0]))}),[P]);g.useEffect((function(){P&&(location.hash=(0,w.T)(t))}),[t,P]),g.useEffect((function(){E&&(void 0!==d&&window.clearTimeout(d),m(window.setTimeout((function(){Promise.allSettled(K(D,t).map(Q)).then((function(){O.get().postMessage({type:"compile",source:t})}))}),300)))}),[t,E]),g.useEffect((function(){O.get().addEventListener("message",(function(e){var t=e.data.source;"string"==typeof t&&l(t)}))}),[]),g.useEffect((function(){Promise.allSettled(M.map((function(e){return Q(e)}))).then((function(){return k(!0)}))}),[]),g.useEffect((function(){window.addEventListener("keydown",(function(e){(e.ctrlKey||e.metaKey)&&"KeyS"===e.code&&(e.preventDefault(),navigator.clipboard.writeText(location.href))}))}),[]);var W=(0,c.Z)().isDarkTheme?"vs-dark":"light";return g.createElement(g.Fragment,null,g.createElement("nav",{className:v+" navbar"},g.createElement("div",{className:"navbar__inner"},g.createElement("div",{className:"navbar__items"},g.createElement("div",{className:"navbar__item dropdown dropdown--hoverable "+b},g.createElement("a",{className:"navbar__link "+b},"Examples"),g.createElement("ul",{className:"dropdown__menu"},C.map((function(e,t){return g.createElement(Y,{key:t,name:e,onClick:function(){return U(e)}})}))))))),g.createElement("div",{className:y},g.createElement("div",{className:x},g.createElement(u.ZP,{language:"typescript",options:S,theme:W,onMount:function(e){u._m.init().then((function(r){r.languages.typescript.typescriptDefaults.setCompilerOptions({allowNonTsExtensions:!0,allowSyntheticDefaultImports:!0,downlevelIteration:!0,module:r.languages.typescript.ModuleKind.CommonJS,moduleResolution:r.languages.typescript.ModuleResolutionKind.NodeJs,noLib:!0,strict:!0,target:r.languages.typescript.ScriptTarget.ESNext,typeRoots:["node_modules/@rbxts"],noEmit:!0,baseUrl:".",rootDir:".",jsx:r.languages.typescript.JsxEmit.React,jsxFactory:"Roact.createElement",jsxFragmentFactory:"Roact.Fragment"});var s=r.Uri.file("input.tsx"),a=r.editor.getModel(s)||r.editor.createModel(t,"typescript",s);e.setModel(a);var o=e.onDidChangeModelContent((function(){return n(e.getValue())}));return e.addCommand(r.KeyMod.Alt|r.KeyMod.Shift|r.KeyCode.KEY_F,(function(){var t=f().formatWithCursor(a.getValue(),Object.assign({},Z,{cursorOffset:a.getOffsetAt(e.getPosition()||new r.Position(0,0)),rangeStart:void 0,rangeEnd:void 0}));e.pushUndoStop(),e.executeEdits("prettier",[{range:a.getFullModelRange(),text:t.formatted}],(function(){return[r.Selection.fromPositions(a.getPositionAt(t.cursorOffset))]})),e.pushUndoStop()})),T(a),n(a.getValue()),function(){return o.dispose()}}))}})),g.createElement("div",{className:x},g.createElement(u.ZP,{language:"lua",options:N,theme:W,value:a}))))}},4877:function(e,t,n){"use strict";n.d(t,{E:function(){return l},T:function(){return d}});var r=n(5861),s=n(7757),a=n.n(s),o=n(6961),i=n.n(o),u="#code/",c="#gist/";function l(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(a().mark((function e(t){var n,r,s,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.startsWith(u)){e.next=6;break}if(null===(n=i().decompressFromEncodedURIComponent(t.substr(u.length)))){e.next=4;break}return e.abrupt("return",n);case 4:e.next=16;break;case 6:if(!t.startsWith(c)){e.next=16;break}return r=t.substr(c.length),e.next=10,fetch("https://api.github.com/gists/"+r);case 10:if(200!==(s=e.sent).status){e.next=16;break}return e.next=14,s.json();case 14:return o=e.sent,e.abrupt("return",Object.values(o.files)[0].content);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return u+i().compressToEncodedURIComponent(e)}},2457:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=2457,e.exports=t}}]);